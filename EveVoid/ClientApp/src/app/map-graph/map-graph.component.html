<div style="height: calc(100vh - 64px);width: calc(100vw - 400px);">
  <ngx-graph class="chart-container" [draggingEnabled]="false" [update$]="update$" [showMiniMap]="true" [animate]="true"
    [links]="links" [layoutSettings]="layoutSettings" [nodes]="nodes" [clusters]="clusters"[miniMapMaxWidth]="300" [miniMapMaxHeight]="300"
    layout="dagreCluster">
    <ng-template #nodeTemplate let-node>
      <svg:g class="node">
        <svg:foreignObject width="120" height="44">
          <xhtml:div style="height:100%">
            <mat-card [style.background]="node.data.customColor" fxFlex fxLayout="column" fxLayoutAlign="space-around center" style="padding:5px">
              <div fxLayout="row" fxLayoutAlign="space-around start">
                <a style="color:white; font-size: large;" [matBadge]="node.data.pilotCount" [matBadgeHidden]="node.data.pilotCount === 0" matTooltipPosition="after"
                [matTooltip]="node.data.pilots" [matTooltipDisabled]="node.data.pilotCount === 0" (click)="goToSystem(node.id)"
                matTooltipClass="material-tooltip">
                {{node.label}}
              </a>
              </div>
            </mat-card>
          </xhtml:div>
        </svg:foreignObject>
        <!-- <svg:rect [attr.width]="node.dimension.width" [attr.height]="node.dimension.height"
          [attr.fill]="node.data.customColor" />
        <svg:text alignment-baseline="central" [attr.x]="10" [attr.y]="node.dimension.height / 2"
          [style.fill]="'white'">
          <a (click)="goToSystem(node.id)">{{node.label}}</a>
        </svg:text> -->
      </svg:g>
    </ng-template>

    <ng-template #linkTemplate let-link>
      <svg:g class="edge">
        <svg:path class="line" [style.stroke]="link.data.color" [style.stroke-width]="link.data.width" stroke-width="2">
        </svg:path>
        <svg:text class="edge-label" text-anchor="middle">
          <textPath class="text-path" [attr.href]="'#' + link.id" [style.dominant-baseline]="link.dominantBaseline"
            [style.fill]="link.data.textcolor" [style.font-size]="'large'" startOffset="50%">
            {{link.label}}
          </textPath>
        </svg:text>
      </svg:g>
    </ng-template>
  </ngx-graph>
</div>
